<div class="campaign-container">
  <div class="page-header">
    <button class="btn btn-outline" (click)="goBack()">← Back</button>
    <h1>Campaign Configuration</h1>
    <p>Manage and edit your campaign configurations</p>
  </div>

  <!-- Alert Messages -->
  <div class="alerts">
    <div *ngIf="successMessage" class="alert alert-success">
      <span>✓</span> {{ successMessage }}
    </div>
    <div *ngIf="error" class="alert alert-error">
      <span>✕</span> {{ error }}
    </div>
  </div>

  <div class="container">
    <div class="content-layout">
      <!-- Configs List -->
      <div class="configs-panel">
        <h2>Available Campaigns</h2>
        
        <div *ngIf="loading" class="loading">
          <div class="spinner"></div>
          <p>Loading configurations...</p>
        </div>

        <div *ngIf="!loading" class="configs-list">
          <div *ngIf="configs.length === 0" class="empty-state">
            <p>No campaigns found</p>
          </div>

          <div 
            *ngFor="let config of configs" 
            class="config-item"
            [class.active]="selectedConfig?.campId === config.campId"
            (click)="viewConfig(config)"
          >
            <div class="config-header">
              <h3>{{ config.campId }}</h3>
              <span class="config-badge">{{ config.configName }}</span>
            </div>
            <p class="text-muted">{{ config.description || 'No description' }}</p>
          </div>
        </div>
      </div>

      <!-- Config Details -->
      <div class="details-panel">
        <div *ngIf="!selectedConfig" class="empty-state">
          <h2>Select a Campaign</h2>
          <p>Choose a campaign from the list to view and edit its configuration</p>
        </div>

        <div *ngIf="selectedConfig" class="config-details">
          <div class="details-header">
            <h2>{{ selectedConfig.campId }}</h2>
            <div class="action-buttons">
              <button 
                *ngIf="!editMode"
                class="btn btn-primary btn-sm" 
                (click)="startEdit()"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
                Edit
              </button>
              <button 
                *ngIf="editMode"
                class="btn btn-primary btn-sm" 
                (click)="saveConfig()"
                [disabled]="loading"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                  <polyline points="17 21 17 13 7 13 7 21"></polyline>
                  <polyline points="7 3 7 8 15 8"></polyline>
                </svg>
                Save
              </button>
              <button 
                *ngIf="editMode"
                class="btn btn-secondary btn-sm" 
                (click)="cancelEdit()"
              >
                Cancel
              </button>
              <button 
                *ngIf="!editMode"
                class="btn btn-outline btn-sm"
                style="color: var(--danger-color); border-color: var(--danger-color);"
                (click)="deleteConfig(selectedConfig.campId)"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                  <line x1="10" y1="11" x2="10" y2="17"></line>
                  <line x1="14" y1="11" x2="14" y2="17"></line>
                </svg>
                Delete
              </button>
            </div>
          </div>

          <!-- Preview Mode -->
          <div *ngIf="!editMode" class="config-content">
            <div class="info-block">
              <label>Campaign ID</label>
              <p>{{ selectedConfig.campId }}</p>
            </div>
            <div class="info-block">
              <label>Config Name</label>
              <p>{{ selectedConfig.configName }}</p>
            </div>
            <div class="info-block">
              <label>Configuration Settings</label>
              <pre>{{ selectedConfig.configSettings | json }}</pre>
            </div>
            <div *ngIf="selectedConfig.description" class="info-block">
              <label>Description</label>
              <p>{{ selectedConfig.description }}</p>
            </div>
          </div>

          <!-- Edit Mode -->
          <div *ngIf="editMode" class="config-form">
            <div class="form-group">
              <label>Configuration Settings (JSON)</label>
              <textarea 
                [(ngModel)]="editedConfig"
              ></textarea>
              <p class="hint">Edit the JSON configuration directly</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
